/* ==========================================================================
   DIMMS Lab – Custom (lean + deterministic)
   This file compiles last (via assets/css/main.scss -> "custom"),
   so these rules win over theme defaults.
   ========================================================================== */

/* ------------------  MODERNIZED COLOR PALETTE  ------------------ */
/* Deep Navy/Slate Blue Theme - sophisticated academic aesthetic */

// Primary Colors - Deep Navy/Slate (replaces harsh red)
$navy-primary: #1e3a5f;        // Main header background
$navy-dark: #152a45;           // Darker variant for footer
$navy-light: #2d4a6f;          // Lighter variant for accents

// Accent Colors - Refined Gold & Teal
$accent-gold: #c9a227;         // Muted gold (subtle York connection)
$accent-gold-light: #d4b23d;   // Lighter gold for hover states
$accent-teal: #0097a7;         // Links/highlights
$accent-teal-light: #00acc1;   // Lighter teal for hover
$accent-teal-dark: #00796b;    // Darker teal for emphasis

// Legacy variable mappings (for compatibility)
$york-red: $navy-primary;
$york-gold: $accent-gold;
$dimms-cyan: $accent-teal-light;
$dimms-teal: $accent-teal;
$accent-blue: #3498db;
$dark-gray: #2c3e50;
$light-gray: #f8f9fa;

// Gradients
$gradient-primary: linear-gradient(135deg, $navy-primary 0%, $navy-light 100%);
$gradient-secondary: linear-gradient(135deg, $accent-teal 0%, $accent-teal-dark 100%);

/* Optional modern typography */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

body {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
  line-height: 1.7;
  color: #333;
}

/* ==========================================================================
   A) GLOBAL TOP-GAP FIXES (header/body/main/content)
   ========================================================================== */

/* Theme sometimes reserves space for a fixed masthead. We don't. */
body { padding-top: 0 !important; }

/* Keep the header tight; we’re using a static (relative) masthead. */
.masthead { margin-bottom: 0 !important; }

/* Remove any hero band if a page declares it. */
.page__hero,
.page__hero--overlay {
  display: none !important;
  margin: 0 !important;
  padding: 0 !important;
  min-height: 0 !important;
}

/* Main wrapper and article header must start flush under the masthead. */
#main { margin-top: 0 !important; padding-top: 0 !important; }
article.page > header { margin-top: 0 !important; padding-top: 0 !important; }

/* Inner wrappers/content should not add top spacing. */
.page__inner-wrap,
.page__content { margin-top: 0 !important; padding-top: 0 !important; }

/* Trim the first real element (prevents H1/H2/figure bumps). */
.page__content > *:first-child,
.page__inner-wrap > header:first-child {
  margin-top: 0 !important; padding-top: 0 !important;
}

/* Page title: a small, consistent offset looks polished. */
.page__title { margin-top: 0.25rem !important; }

/* Slightly gentler defaults for other headings elsewhere. */
h1, h2, h3, h4, h5, h6 { margin: 1.2em 0 0.5em; }
h1 { color: $york-red; }

/* ==========================================================================
   B) SIDEBAR – align with header, never reserve masthead height
   ========================================================================== */

/* Kill all top spacing on the sidebar itself. */
.sidebar { margin-top: 0 !important; padding-top: 0 !important; }

/* Make the sidebar sticky in normal flow; never fixed. */
.sidebar { position: sticky !important; top: 0.75rem !important; }

/* Some builds attach a generic .sticky utility – neutralize if present. */
.sidebar.sticky,
.sticky { position: sticky !important; top: 0.75rem !important; }

/* If the HTML happens to be "#main > .sidebar", keep it tight too. */
#main > .sidebar { margin-top: 0 !important; padding-top: 0 !important; }

/* Sidebar internals shouldn't introduce a top bump. */
.sidebar .author__avatar,
.sidebar .author__content,
.sidebar .author__urls-wrapper { margin-top: 0 !important; }

/* ==========================================================================
   C) NAV – ensure visibility; keep your color choices
   ========================================================================== */

.masthead,
.masthead__inner-wrap,
.masthead__menu,
.greedy-nav {
  background-color: $york-red !important;
  background-image: none !important;
}

/* Site title */
.masthead__menu-item--lg a {
  color: #ffffff !important;
  text-decoration: none !important;
  font-weight: 700 !important;
  letter-spacing: 0.5px !important;
  transition: color 0.25s ease !important;
  &:hover { color: $accent-gold-light !important; }
}

/* Navigation links - clean white on navy */
.masthead .greedy-nav a,
.masthead .visible-links a,
.masthead .masthead__menu-item a,
.greedy-nav .visible-links .masthead__menu-item a {
  color: rgba(255, 255, 255, 0.9) !important;
  text-decoration: none !important;
  font-weight: 500 !important;
  transition: all 0.25s ease !important;
  &:hover {
    color: #ffffff !important;
    background: rgba(255, 255, 255, 0.1) !important;
  }
}

/* Focus states for accessibility */
.masthead a:focus,
.greedy-nav a:focus {
  outline: 2px solid $accent-gold !important;
  outline-offset: 2px !important;
}

/* ==========================================================================
   D) NICE-TO-HAVES (kept minimal and safe)
   ========================================================================== */

a {
  color: $accent-teal;
  text-decoration: none;
  transition: all .2s ease;
  &:hover { color: $navy-primary; text-decoration: underline; }
}

/* Optional: small visual underline for main H1 */
h1.page__title {
  position: relative;
  padding-bottom: 12px;
  margin-bottom: 24px;
  &::after {
    content: '';
    position: absolute;
    left: 0; bottom: 0;
    width: 60px; height: 3px;
    background: $gradient-secondary;
    border-radius: 2px;
  }
}

/* ==========================================================================
   E) HOMEPAGE STYLES - Hero, Sections, Cards
   ========================================================================== */

/* ---------- HERO SECTION ---------- */
.homepage-hero {
  background: linear-gradient(135deg, $light-gray 0%, #ffffff 100%);
  padding: 3rem 0;
  margin: -1rem -1rem 3rem -1rem;
  border-bottom: 1px solid rgba(30, 58, 95, 0.1);
}

.hero-content {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 3rem;
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 1.5rem;
}

.hero-text {
  flex: 1;
  max-width: 550px;
}

.hero-title {
  font-size: 3rem;
  font-weight: 700;
  color: $navy-primary;
  margin: 0 0 0.5rem 0;
  padding: 0;
  line-height: 1.1;
  &::after { display: none; }
}

.hero-subtitle {
  font-size: 1.25rem;
  color: $accent-teal;
  font-weight: 600;
  margin: 0 0 1rem 0;
  letter-spacing: 0.5px;
}

.hero-tagline {
  font-size: 1.1rem;
  color: #555;
  line-height: 1.7;
  margin: 0 0 1.5rem 0;
}

.hero-cta {
  display: flex;
  gap: 1rem;
  margin-bottom: 1.5rem;
  flex-wrap: wrap;
}

.hero-affiliation {
  font-size: 0.9rem;
  color: #777;
  margin: 0;
}

.hero-graphic {
  flex: 0 0 380px;
  max-width: 380px;
  svg { width: 100%; height: auto; }
}

/* ---------- BUTTONS ---------- */
.btn {
  display: inline-block;
  padding: 0.75rem 1.5rem;
  border-radius: 6px;
  font-weight: 600;
  font-size: 0.95rem;
  text-decoration: none;
  transition: all 0.25s ease;
  cursor: pointer;
}

.btn-primary {
  background: $navy-primary;
  color: #fff;
  &:hover {
    background: $navy-dark;
    color: #fff;
    text-decoration: none;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(30, 58, 95, 0.3);
  }
}

.btn-secondary {
  background: transparent;
  color: $navy-primary;
  border: 2px solid $navy-primary;
  &:hover {
    background: $navy-primary;
    color: #fff;
    text-decoration: none;
  }
}

.btn-outline {
  background: transparent;
  color: $accent-teal;
  border: 2px solid $accent-teal;
  &:hover {
    background: $accent-teal;
    color: #fff;
    text-decoration: none;
  }
}

/* ---------- SECTION STYLES ---------- */
section {
  margin-bottom: 4rem;
}

section > h2 {
  font-size: 1.8rem;
  color: $navy-primary;
  margin-bottom: 1rem;
  padding-bottom: 0.75rem;
  border-bottom: 3px solid $accent-teal;
  display: inline-block;
}

.section-intro {
  font-size: 1.1rem;
  color: #555;
  max-width: 800px;
  margin-bottom: 2rem;
}

.section-cta {
  text-align: center;
  margin-top: 2rem;
}

/* ---------- WHAT WE DO / RESEARCH GRID ---------- */
.what-we-do {
  background: #fff;
}

.research-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 1.5rem;
}

.research-item {
  background: #fff;
  border: 1px solid #e8e8e8;
  border-radius: 10px;
  padding: 1.5rem;
  transition: all 0.25s ease;
  &:hover {
    border-color: $accent-teal;
    box-shadow: 0 8px 25px rgba(0, 151, 167, 0.12);
    transform: translateY(-3px);
  }
  h3 {
    color: $navy-primary;
    font-size: 1.1rem;
    margin: 0.75rem 0 0.5rem 0;
  }
  p {
    color: #666;
    font-size: 0.95rem;
    line-height: 1.6;
    margin: 0;
  }
}

.research-icon {
  font-size: 2rem;
  line-height: 1;
}

/* ---------- NEWS SECTION ---------- */
.latest-news {
  background: $light-gray;
  padding: 3rem;
  margin-left: -2rem;
  margin-right: -2rem;
  border-radius: 12px;
}

.news-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 1.5rem;
}

.news-card {
  background: #fff;
  border-radius: 10px;
  padding: 1.5rem;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
  transition: all 0.25s ease;
  &:hover {
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
    transform: translateY(-3px);
  }
  h3 {
    color: $navy-primary;
    font-size: 1.1rem;
    margin: 0.5rem 0;
  }
  p {
    color: #666;
    font-size: 0.95rem;
    line-height: 1.6;
    margin: 0 0 1rem 0;
  }
}

.news-featured {
  border-left: 4px solid $accent-gold;
}

.news-date {
  font-size: 0.8rem;
  color: $accent-teal;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.news-link {
  color: $accent-teal;
  font-weight: 600;
  font-size: 0.9rem;
  &:hover {
    color: $navy-primary;
  }
}

/* ---------- PUBLICATIONS SECTION ---------- */
.publications-list {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.publication-item {
  display: flex;
  align-items: flex-start;
  gap: 1.5rem;
  padding: 1.25rem;
  background: #fff;
  border: 1px solid #e8e8e8;
  border-radius: 8px;
  transition: all 0.25s ease;
  &:hover {
    border-color: $accent-teal;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
  }
}

.pub-year {
  flex: 0 0 auto;
  background: $navy-primary;
  color: #fff;
  padding: 0.4rem 0.8rem;
  border-radius: 4px;
  font-weight: 700;
  font-size: 0.85rem;
}

.pub-content {
  flex: 1;
  h4 {
    color: $navy-primary;
    font-size: 1rem;
    margin: 0 0 0.4rem 0;
    line-height: 1.4;
  }
}

.pub-authors {
  color: #666;
  font-size: 0.9rem;
  margin: 0 0 0.25rem 0;
}

.pub-journal {
  color: $accent-teal;
  font-size: 0.85rem;
  font-style: italic;
  margin: 0;
}

.pub-link {
  flex: 0 0 auto;
  background: $accent-teal;
  color: #fff;
  padding: 0.4rem 1rem;
  border-radius: 4px;
  font-weight: 600;
  font-size: 0.85rem;
  align-self: center;
  &:hover {
    background: $accent-teal-dark;
    color: #fff;
    text-decoration: none;
  }
}

/* ---------- LAB DIRECTOR SECTION ---------- */
.director-card {
  background: linear-gradient(135deg, $navy-primary 0%, $navy-light 100%);
  border-radius: 12px;
  padding: 2.5rem;
  color: #fff;
}

.director-info {
  h3 {
    color: #fff;
    font-size: 1.5rem;
    margin: 0 0 0.5rem 0;
  }
}

.director-title {
  color: rgba(255, 255, 255, 0.85);
  font-size: 1rem;
  margin: 0 0 1rem 0;
}

.director-bio {
  color: rgba(255, 255, 255, 0.9);
  line-height: 1.7;
  margin: 0 0 1.5rem 0;
}

.director-interests {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  margin-bottom: 1.5rem;
}

.interest-tag {
  background: rgba(255, 255, 255, 0.15);
  color: #fff;
  padding: 0.35rem 0.75rem;
  border-radius: 20px;
  font-size: 0.85rem;
  font-weight: 500;
}

.director-contact {
  display: inline-block;
  color: $accent-gold-light;
  font-weight: 600;
  &:hover {
    color: #fff;
  }
}

/* ---------- RESPONSIVE ADJUSTMENTS ---------- */
@media (max-width: 900px) {
  .hero-content {
    flex-direction: column;
    text-align: center;
  }
  .hero-text { max-width: 100%; }
  .hero-cta { justify-content: center; }
  .hero-graphic {
    flex: 0 0 300px;
    max-width: 300px;
  }
  .hero-title { font-size: 2.5rem; }
}

@media (max-width: 600px) {
  .homepage-hero { padding: 2rem 0; }
  .hero-title { font-size: 2rem; }
  .hero-subtitle { font-size: 1.1rem; }
  .hero-cta {
    flex-direction: column;
    align-items: center;
  }
  .btn { width: 100%; text-align: center; }
  .latest-news {
    padding: 2rem 1rem;
    margin-left: -1rem;
    margin-right: -1rem;
  }
  .publication-item {
    flex-direction: column;
    gap: 1rem;
  }
  .pub-link { align-self: flex-start; }
}

/* ==========================================================================
   F) LAST-RESORT PIN (keep at bottom so it wins)
   ========================================================================== */

.initial-content,
.layout--single .page__inner-wrap,
.layout--single .page__content,
.page,
.page__inner-wrap,
.page__content {
  margin-top: 0 !important;
  padding-top: 0 !important;
}
